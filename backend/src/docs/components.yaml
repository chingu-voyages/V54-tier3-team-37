paths:
  /prompts/generate:
    post:
      summary: Generate prompt using Gemini API
      tags:
        - Prompts
      security:
        - cookieAuth: [ ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromptInput'
      responses:
        "200":
          description: Gemini prompt response
          content:
            application/json:
              schema:
                type: object
                properties:
                  role:
                    type: string
                  context:
                    type: string
                  task:
                    type: string
                  output:
                    type: string
                  constraints:
                    type: string
                  language:
                    type: string
                  score:
                    type: integer
                  geminiText:
                    type: string
                    description: Full text generated by Gemini
                  geminiSummary:
                    type: string
                    description: Summary of the generated text
        "400":
          description: Missing prompt in request body
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Prompt is required"
        "401":
          description: Unauthorized - token not found or invalid
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Unauthorized"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Something went wrong"
  /prompts/save:
    post:
      summary: Save a Gemini-generated prompt
      description: |
        Persists a prompt generated by Gemini along with metadata such as score and user ID.
        Returns the full saved prompt model. Duplicate prompts (same role, context, task, etc.)
        will return a 409 Conflict.
      tags:
        - Prompts
      security:
        - cookieAuth: [ ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PromptInput'
      responses:
        "200":
          description: Prompt saved successfully and returned with metadata
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: Unique identifier for the saved prompt
                  userId:
                    type: string
                    description: ID of the user who saved the prompt
                  role:
                    type: string
                  context:
                    type: string
                  task:
                    type: string
                  output:
                    type: string
                  constraints:
                    type: string
                  language:
                    type: string
                  score:
                    type: integer
                  geminiText:
                    type: string
                    description: Full text generated by Gemini
                  geminiSummary:
                    type: string
                    description: Summary of the generated text
        "400":
          description: Validation error - missing or invalid prompt fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "All fields are required"
        "401":
          description: Unauthorized - user not authenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Unauthorized"
        "409":
          description: Duplicate prompt - this prompt already exists for the user
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Prompt already exists"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Something went wrong"
